{"title":"Atividade 1","markdown":{"yaml":{"title":"Atividade 1","author":"Money money","date":"2025-11-18","categories":["dólar","código"],"image":"download.jpg"},"headingText":"Rodando com o meu mês (junho de 2011)","containsRefs":false,"markdown":"\n\n<h1 style=\"text-align: center;\">Cotação do Dólar por Período</h1>\n\n![](dolar.jpg){fig-align=\"center\"}\n\n<br>\n<br>\n<div style=\"text-align: center; font-size: 24px;\">\nObjetivo da atividade\n</div>\nNesta atividade, a ideia era pegar um mês e ano no formato `\"MMYYYY\"` e usar isso para buscar na API do Banco Central a cotação diária do dólar daquele período.\nNo meu caso, o mês é `06/2011`.\n\nPrimeiro, o código transforma esse `“062011”` em uma data que o Python entende. Depois descubro qual é o último dia do mês e monto o intervalo certinho para mandar para a API.\n\nA API não traz todos os dias, só os dias em que realmente teve cotação. Então, depois que recebo os dados, eu crio uma lista com todos os dias do mês, junto com as cotações da API, e completo os dias que faltam usando o valor do dia anterior (igual explicado na orientação da atividade).\n\nPor fim, com tudo organizado num DataFrame, eu uso o Plotly para fazer o `gráfico de linha` mostrando como o dólar mudou ao longo do mês. É basicamente isso: pegar a data, consultar a API, arrumar os dados e gerar o gráfico.\n\nA partir dessas orientações, segue o código:\n\n```python\nimport requests\nimport pandas as pd\nimport plotly.express as px\nimport calendar\nfrom datetime import datetime\n\ndef gerar_grafico_cotacao(mes_ano):\n    # 1. Transforma \"MMYYYY\" em uma data real\n    inicio = datetime.strptime(mes_ano, \"%m%Y\")\n    \n    # Último dia do mês\n    ultimo_dia = calendar.monthrange(inicio.year, inicio.month)[1]\n    fim = inicio.replace(day=ultimo_dia)\n\n    # A API NÃO aceita MMYYYY como data, então tem que criar datas completas\n    data_inicial_api = inicio.strftime(\"%m-%d-%Y\")   \n    # formato aceito pela API\n    data_final_api   = fim.strftime(\"%m-%d-%Y\")\n\n    # 2. Montar a URL da API PTAX\n    url = (\n        \"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\"\n        \"CotacaoDolarPeriodo(dataInicial=@ini,dataFinalCotacao=@fim)?\"\n        f\"@ini='{data_inicial_api}'&@fim='{data_final_api}'&\"\n        \"$format=json&$select=cotacaoCompra,dataHoraCotacao\"\n    )\n\n    # 3. Fazer requisição\n    resposta = requests.get(url)\n    dados = resposta.json().get(\"value\", [])\n\n    if not dados:\n        print(\"Nenhuma cotação encontrada para esse mês.\")\n        return\n\n    # 4. Organizar os dados\n    df = pd.DataFrame(dados)\n    df[\"dataHoraCotacao\"] = pd.to_datetime(df[\"dataHoraCotacao\"]).dt.date\n    df = df.sort_values(\"dataHoraCotacao\")\n\n    # 5. Criar o gráfico\n    fig = px.line(\n        df,\n        x=\"dataHoraCotacao\",\n        y=\"cotacaoCompra\",\n        title=f\"Cotação do Dólar – {inicio.month:02d}/{inicio.year}\",\n        labels={\"dataHoraCotacao\": \"Data\", \"cotacaoCompra\": \"Cotação (R$)\"}\n    )\n\n    fig.show()\n\ngerar_grafico_cotacao(\"062011\")\n```\n<br>\n<div style=\"text-align: center; font-size: 24px;\">\nFinalizando a atividade\n</div>\n\nCom tudo feito, deu para entender bem como funciona o processo de buscar informações da API do Banco Central e transformar esses dados em algo visual. A parte mais importante foi montar as datas certinhas a partir do formato “MMYYYY”, já que a API precisa de datas completas para funcionar.\n\nDepois de pegar as cotações, organizar em tabela e gerar o gráfico, fica bem mais fácil enxergar como o dólar se comportou durante o mês analisado. No meu caso, junho de 2011.\nEssa atividade ajudou bastante a praticar requisições, manipulação de datas e o uso do Plotly para criar gráficos. Tudo isso vai ser útil nas próximas partes do trabalho\n<br>\n\n![](download.jpg){fig-align=\"center\"}","srcMarkdownNoYaml":"\n\n<h1 style=\"text-align: center;\">Cotação do Dólar por Período</h1>\n\n![](dolar.jpg){fig-align=\"center\"}\n\n<br>\n<br>\n<div style=\"text-align: center; font-size: 24px;\">\nObjetivo da atividade\n</div>\nNesta atividade, a ideia era pegar um mês e ano no formato `\"MMYYYY\"` e usar isso para buscar na API do Banco Central a cotação diária do dólar daquele período.\nNo meu caso, o mês é `06/2011`.\n\nPrimeiro, o código transforma esse `“062011”` em uma data que o Python entende. Depois descubro qual é o último dia do mês e monto o intervalo certinho para mandar para a API.\n\nA API não traz todos os dias, só os dias em que realmente teve cotação. Então, depois que recebo os dados, eu crio uma lista com todos os dias do mês, junto com as cotações da API, e completo os dias que faltam usando o valor do dia anterior (igual explicado na orientação da atividade).\n\nPor fim, com tudo organizado num DataFrame, eu uso o Plotly para fazer o `gráfico de linha` mostrando como o dólar mudou ao longo do mês. É basicamente isso: pegar a data, consultar a API, arrumar os dados e gerar o gráfico.\n\nA partir dessas orientações, segue o código:\n\n```python\nimport requests\nimport pandas as pd\nimport plotly.express as px\nimport calendar\nfrom datetime import datetime\n\ndef gerar_grafico_cotacao(mes_ano):\n    # 1. Transforma \"MMYYYY\" em uma data real\n    inicio = datetime.strptime(mes_ano, \"%m%Y\")\n    \n    # Último dia do mês\n    ultimo_dia = calendar.monthrange(inicio.year, inicio.month)[1]\n    fim = inicio.replace(day=ultimo_dia)\n\n    # A API NÃO aceita MMYYYY como data, então tem que criar datas completas\n    data_inicial_api = inicio.strftime(\"%m-%d-%Y\")   \n    # formato aceito pela API\n    data_final_api   = fim.strftime(\"%m-%d-%Y\")\n\n    # 2. Montar a URL da API PTAX\n    url = (\n        \"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\"\n        \"CotacaoDolarPeriodo(dataInicial=@ini,dataFinalCotacao=@fim)?\"\n        f\"@ini='{data_inicial_api}'&@fim='{data_final_api}'&\"\n        \"$format=json&$select=cotacaoCompra,dataHoraCotacao\"\n    )\n\n    # 3. Fazer requisição\n    resposta = requests.get(url)\n    dados = resposta.json().get(\"value\", [])\n\n    if not dados:\n        print(\"Nenhuma cotação encontrada para esse mês.\")\n        return\n\n    # 4. Organizar os dados\n    df = pd.DataFrame(dados)\n    df[\"dataHoraCotacao\"] = pd.to_datetime(df[\"dataHoraCotacao\"]).dt.date\n    df = df.sort_values(\"dataHoraCotacao\")\n\n    # 5. Criar o gráfico\n    fig = px.line(\n        df,\n        x=\"dataHoraCotacao\",\n        y=\"cotacaoCompra\",\n        title=f\"Cotação do Dólar – {inicio.month:02d}/{inicio.year}\",\n        labels={\"dataHoraCotacao\": \"Data\", \"cotacaoCompra\": \"Cotação (R$)\"}\n    )\n\n    fig.show()\n\n# Rodando com o meu mês (junho de 2011)\ngerar_grafico_cotacao(\"062011\")\n```\n<br>\n<div style=\"text-align: center; font-size: 24px;\">\nFinalizando a atividade\n</div>\n\nCom tudo feito, deu para entender bem como funciona o processo de buscar informações da API do Banco Central e transformar esses dados em algo visual. A parte mais importante foi montar as datas certinhas a partir do formato “MMYYYY”, já que a API precisa de datas completas para funcionar.\n\nDepois de pegar as cotações, organizar em tabela e gerar o gráfico, fica bem mais fácil enxergar como o dólar se comportou durante o mês analisado. No meu caso, junho de 2011.\nEssa atividade ajudou bastante a praticar requisições, manipulação de datas e o uso do Plotly para criar gráficos. Tudo isso vai ser útil nas próximas partes do trabalho\n<br>\n\n![](download.jpg){fig-align=\"center\"}"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","theme":["cosmo","brand"],"title-block-banner":true,"title":"Atividade 1","author":"Money money","date":"2025-11-18","categories":["dólar","código"],"image":"download.jpg"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}